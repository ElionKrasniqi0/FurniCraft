@model Product

<!-- Breadcrumb Navigation -->
<div class="hero">
    <div class="container">
        <div class="row justify-content-between">
            <div class="col-lg-5">
                <div class="intro-excerpt">
                    <h1>ProductDetails</h1>
                </div>
            </div>
            <div class="col-lg-7">
            </div>
        </div>
    </div>
</div>

<!-- Product Detail Section -->
<section class="py-5">
    <div class="container">
        <div class="row  p-5 border-start border-end border-bottom rounded-bottom border-top">
            <!-- Product Gallery -->
            <div class="col-lg-6">
                <div class="product-gallery">
                    <div class="main-image mb-3 ">
                        <img src="~/Product/@Model.ProImage" alt="@Model.ProName" 
                             class="img-fluid w-120" style="max-height: 350px; object-fit: contain;">
                    </div>
                </div>
            </div>

            <!-- Product Info -->
            <div class="col-lg-6">
                <div class="product-details">
                    <h1 class="product-title mb-2">@Model.ProName</h1>
                    
                    <!-- Rating and Reviews -->
                    <div class="d-flex align-items-center mb-3">
                        <div class="rating me-2">
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star-half-alt text-warning"></i>
                        </div>
                        <a href="#reviews" class="text-muted small">(24 customer reviews)</a>
                    </div>
                    
                    <!-- Price -->
                    <div class="price-section mb-4">
                        <div class="d-flex align-items-center">
                            <h3 class="current-price text-primary mb-0">@Model.Price.ToString("C")</h3>
                            @if (Model.Price > 200)
                            {
                                <span class="original-price text-muted text-decoration-line-through ms-3">@(Model.Price * 1.2m).ToString("C")</span>
                                <span class="discount-badge bg-danger text-white small ms-2 px-2 py-1 rounded">Save 20%</span>
                            }
                        </div>
                        <p class="text-success small mb-0"><i class="fas fa-check-circle me-1"></i> In stock and ready to ship</p>
                    </div>
                    
                    <!-- Short Description -->
                    <div class="short-description mb-4">
                        <p class="mb-0">@Model.Descreption</p>
                    </div>
                    
                    <!-- Add to Cart Form -->
                    <form id="addToCartForm" method="post" action="/Carts/AddToCart" class="mb-4">
                        <input type="hidden" name="ProId" value="@Model.ProId">
                        
                        <div class="row g-3 align-items-center">
                            <div class="col-md-4">
                                <label for="quantity" class="form-label">Quantity</label>
                                <div class="input-group">
                                    <button type="button" class="btn btn-outline-secondary quantity-minus">-</button>
                                    <input type="number" id="quantity" name="qty" 
                                           class="form-control text-center" value="1" min="1" max="10">
                                    <button type="button" class="btn btn-outline-secondary quantity-plus">+</button>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <button type="submit" id="addToCartBtn" class="btn btn-primary btn-lg w-100 py-3">
                                    <i class="fas fa-shopping-cart me-2"></i> Add to Cart
                                </button>
                            </div>
                        </div>
                    </form>
                    
                    <!-- Product Meta -->
                    <div class="product-meta border-top pt-3">
                        <div class="row small">
                            <div class="col-md-6 mb-2">
                                <span class="text-muted me-2">SKU:</span>
                                <span>FC-@Model.ProId</span>
                            </div>
                            <div class="col-md-6 mb-2">
                                <span class="text-muted me-2">Category:</span>
                                <a href="/Home/ProductCategory/@Model.CatId" class="text-decoration-none">@Model.Category?.CatName</a>
                            </div>
                            <div class="col-md-6 mb-2">
                                <span class="text-muted me-2">Materials:</span>
                                <span>Wood, Metal</span>
                            </div>
                            <div class="col-md-6 mb-2">
                                <span class="text-muted me-2">Dimensions:</span>
                                <span>120 × 60 × 75 cm</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Share Buttons -->
                    <div class="share-buttons mt-4 pt-3 border-top">
                        <span class="me-2 text-muted">Share:</span>
                        <a href="#" class="btn btn-sm btn-outline-secondary me-2 share-facebook">
                            <i class="fab fa-facebook-f me-1"></i> Facebook
                        </a>
                        <a href="#" class="btn btn-sm btn-outline-secondary me-2 share-twitter">
                            <i class="fab fa-twitter me-1"></i> Twitter
                        </a>
                        <a href="#" class="btn btn-sm btn-outline-secondary share-pinterest">
                            <i class="fab fa-pinterest me-1"></i> Pinterest
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Product Tabs Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="product-tabs">
                    <ul class="nav nav-tabs border-0" id="productTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="description-tab" data-bs-toggle="tab" 
                                    data-bs-target="#description" type="button" role="tab" aria-controls="description" 
                                    aria-selected="true">Description</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="specs-tab" data-bs-toggle="tab" 
                                    data-bs-target="#specs" type="button" role="tab" aria-controls="specs" 
                                    aria-selected="false">Specifications</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" 
                                    data-bs-target="#reviews" type="button" role="tab" aria-controls="reviews" 
                                    aria-selected="false">Reviews (24)</button>
                        </li>
                    </ul>
                    
                    <div class="tab-content bg-white p-4 border-start border-end border-bottom rounded-bottom border-top" id="productTabsContent">
                        <!-- Description Tab -->
                        <div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="description-tab">
                            <h4 class="mb-3">Product Description</h4>
                            <p>@Model.Descreption</p>
                            <p>Our @Model.ProName is crafted with premium materials to ensure durability and comfort. The elegant design complements any modern interior while providing exceptional functionality.</p>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-check text-primary me-2"></i> Handcrafted with sustainable materials</li>
                                <li><i class="fas fa-check text-primary me-2"></i> Easy to assemble with included tools</li>
                                <li><i class="fas fa-check text-primary me-2"></i> 5-year limited warranty</li>
                                <li><i class="fas fa-check text-primary me-2"></i> Free shipping on all orders</li>
                            </ul>
                        </div>
                        
                        <!-- Specifications Tab -->
                        <div class="tab-pane fade" id="specs" role="tabpanel" aria-labelledby="specs-tab">
                            <h4 class="mb-3">Product Specifications</h4>
                            <div class="table-responsive">
                                <table class="table table-bordered">
                                    <tbody>
                                        <tr>
                                            <th class="w-25">Material</th>
                                            <td>Solid Oak Wood, Stainless Steel</td>
                                        </tr>
                                        <tr>
                                            <th>Dimensions</th>
                                            <td>120 × 60 × 75 cm (L × W × H)</td>
                                        </tr>
                                        <tr>
                                            <th>Weight</th>
                                            <td>25 kg</td>
                                        </tr>
                                        <tr>
                                            <th>Color</th>
                                            <td>Natural Wood Finish</td>
                                        </tr>
                                        <tr>
                                            <th>Assembly</th>
                                            <td>Required (tools included)</td>
                                        </tr>
                                        <tr>
                                            <th>Warranty</th>
                                            <td>5 Years Limited</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Reviews Tab -->
                        <div class="tab-pane fade" id="reviews" role="tabpanel" aria-labelledby="reviews-tab">
                            <h4 class="mb-4">Customer Reviews</h4>
                            
                            <div class="row mb-5">
                                <div class="col-md-4">
                                    <div class="bg-light p-4 text-center rounded mb-3">
                                        <h2 class="display-4 fw-bold mb-0">4.8</h2>
                                        <div class="rating mb-2">
                                            <i class="fas fa-star text-warning"></i>
                                            <i class="fas fa-star text-warning"></i>
                                            <i class="fas fa-star text-warning"></i>
                                            <i class="fas fa-star text-warning"></i>
                                            <i class="fas fa-star-half-alt text-warning"></i>
                                        </div>
                                        <p class="mb-0">Based on 24 reviews</p>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="progress mb-3" style="height: 20px;">
                                        <div class="progress-bar bg-success" role="progressbar" style="width: 85%" 
                                             aria-valuenow="85" aria-valuemin="0" aria-valuemax="100">5 Stars (85%)</div>
                                    </div>
                                    <div class="progress mb-3" style="height: 20px;">
                                        <div class="progress-bar bg-info" role="progressbar" style="width: 10%" 
                                             aria-valuenow="10" aria-valuemin="0" aria-valuemax="100">4 Stars (10%)</div>
                                    </div>
                                    <div class="progress mb-3" style="height: 20px;">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: 3%" 
                                             aria-valuenow="3" aria-valuemin="0" aria-valuemax="100">3 Stars (3%)</div>
                                    </div>
                                    <div class="progress mb-3" style="height: 20px;">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 1%" 
                                             aria-valuenow="1" aria-valuemin="0" aria-valuemax="100">2 Stars (1%)</div>
                                    </div>
                                    <div class="progress" style="height: 20px;">
                                        <div class="progress-bar bg-secondary" role="progressbar" style="width: 1%" 
                                             aria-valuenow="1" aria-valuemin="0" aria-valuemax="100">1 Star (1%)</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Review Form -->
                            <div class="bg-light p-4 rounded mb-5">
                                <h5 class="mb-4">Write a Review</h5>
                                <form>
                                    <div class="mb-3">
                                        <label for="reviewRating" class="form-label">Your Rating</label>
                                        <div class="rating-input">
                                            <input type="radio" id="star5" name="rating" value="5"><label for="star5"></label>
                                            <input type="radio" id="star4" name="rating" value="4"><label for="star4"></label>
                                            <input type="radio" id="star3" name="rating" value="3"><label for="star3"></label>
                                            <input type="radio" id="star2" name="rating" value="2"><label for="star2"></label>
                                            <input type="radio" id="star1" name="rating" value="1"><label for="star1"></label>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="reviewText" class="form-label">Your Review</label>
                                        <textarea class="form-control" id="reviewText" rows="3"></textarea>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Submit Review</button>
                                </form>
                            </div>
                            
                            <!-- Review List -->
                            <div class="review-list">
                                <div class="review-item border-bottom pb-4 mb-4">
                                    <div class="d-flex justify-content-between mb-2">
                                        <div>
                                            <h6 class="mb-0">John D.</h6>
                                            <div class="rating small">
                                                <i class="fas fa-star text-warning"></i>
                                                <i class="fas fa-star text-warning"></i>
                                                <i class="fas fa-star text-warning"></i>
                                                <i class="fas fa-star text-warning"></i>
                                                <i class="fas fa-star text-warning"></i>
                                            </div>
                                        </div>
                                        <small class="text-muted">2 weeks ago</small>
                                    </div>
                                    <p class="mb-2">This product exceeded my expectations. The quality is outstanding and it looks even better in person than in the photos.</p>
                                </div>
                                
                                <div class="review-item border-bottom pb-4 mb-4">
                                    <div class="d-flex justify-content-between mb-2">
                                        <div>
                                            <h6 class="mb-0">Sarah M.</h6>
                                            <div class="rating small">
                                                <i class="fas fa-star text-warning"></i>
                                                <i class="fas fa-star text-warning"></i>
                                                <i class="fas fa-star text-warning"></i>
                                                <i class="fas fa-star text-warning"></i>
                                                <i class="fas fa-star-half-alt text-warning"></i>
                                            </div>
                                        </div>
                                        <small class="text-muted">1 month ago</small>
                                    </div>
                                    <p class="mb-2">Beautiful piece of furniture that really completes our living room. Assembly was straightforward and the instructions were clear.</p>
                                </div>
                                
                                <a href="#" class="btn btn-outline-primary">Load More Reviews</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Related Products Section -->
<section class="py-5">
    <div class="container">
        <h2 class="section-title text-center mb-5">You May Also Like</h2>
        <div class="row g-4">
            @for (int i = 0; i < 4; i++)
            {
                <div class="col-md-6 col-lg-3">
                    <div class="card product-card h-100 border-0 shadow-sm">
                        <div class="badge bg-danger position-absolute top-0 start-0 m-2">New</div>
                        <div class="wishlist-btn position-absolute top-0 end-0 m-2">
                            <button class="btn btn-sm btn-light rounded-circle shadow-sm p-1">
                                <i class="far fa-heart"></i>
                            </button>
                        </div>
                        <a href="#" class="product-image-link">
                            <img src="~/Product/@Model.ProImage" alt="Related Product" 
                                 class="card-img-top p-3" style="height: 200px; object-fit: contain;">
                        </a>
                        <div class="card-body p-3">
                            <div class="d-flex flex-column h-100">
                                <div class="mb-2">
                                    <a href="#" class="text-decoration-none text-dark">
                                        <h6 class="card-title mb-1 fw-bold">@Model.ProName Variant</h6>
                                    </a>
                                    <p class="small text-muted mb-2">@Model.Category?.CatName</p>
                                </div>
                                <div class="mt-auto">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <span class="fw-bold text-primary">@((Model.Price + (i+1)*50).ToString("C"))</span>
                                            <span class="text-muted text-decoration-line-through small ms-1">
                                                @((Model.Price * 1.2m + (i+1)*50).ToString("C"))
                                            </span>
                                        </div>
                                        <form class="add-to-cart-form" method="post" action="/Carts/AddToCart">
                                            <input type="hidden" name="ProId" value="@Model.ProId" />
                                            <input type="hidden" name="qty" value="1" />
                                            <button type="submit" class="btn btn-sm btn-outline-primary rounded-circle p-1">
                                                <i class="fas fa-shopping-cart"></i>
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<style>
    /* Product Gallery */
    .product-gallery .main-image {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 400px;
    }
    
    /* Product Title */
    .product-title {
        font-size: 2rem;
        font-weight: 700;
        color: #212529;
    }
    
    /* Price Section */
    .current-price {
        font-size: 1.75rem;
        font-weight: 700;
    }
    
    .original-price {
        font-size: 1.25rem;
    }
    
    .discount-badge {
        font-size: 0.8rem;
        font-weight: 600;
    }
    
    /* Quantity Input */
    .quantity-minus, .quantity-plus {
        width: 40px;
    }
    
    #quantity {
        max-width: 60px;
        border-left: 0;
        border-right: 0;
    }
    
    /* Product Tabs */
    .product-tabs .nav-tabs {
        border-bottom: 2px solid #dee2e6;
    }
    
    .product-tabs .nav-link {
        padding: 0.75rem 1.5rem;
        font-weight: 600;
        color: #6c757d;
        border: none;
        border-bottom: 3px solid transparent;
    }
    
    .product-tabs .nav-link.active {
            color: #3b5d50;
        background-color: transparent;
            border-bottom: 3px solid #3b5d50;
    }
    
    /* Rating Input */
    .rating-input {
        direction: rtl;
        unicode-bidi: bidi-override;
    }
    
    .rating-input input {
        display: none;
    }
    
    .rating-input label {
        color: #ddd;
        font-size: 1.5rem;
        padding: 0 0.2rem;
        cursor: pointer;
    }
    
    .rating-input input:checked ~ label,
    .rating-input label:hover,
    .rating-input label:hover ~ label {
        color: #ffc107;
    }
    
    /* Product Card */
    .product-card {
        transition: all 0.3s ease;
        border-radius: 0.5rem;
        overflow: hidden;
    }
    
    .product-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    
    /* Responsive Adjustments */
   
</style>

<script>
    $(document).ready(function() {
        // Quantity controls
        $('.quantity-minus').click(function() {
            var input = $(this).parent().find('input');
            var value = parseInt(input.val());
            if (value > 1) {
                input.val(value - 1);
            }
        });
        
        $('.quantity-plus').click(function() {
            var input = $(this).parent().find('input');
            var value = parseInt(input.val());
            if (value < 10) {
                input.val(value + 1);
            }
        });
        
        // Add to cart form submission
        $('#addToCartForm').submit(function(e) {
            e.preventDefault();
            var button = $('#addToCartBtn');
            var originalText = button.html();
            
            button.prop('disabled', true)
                 .html('<span class="spinner-border spinner-border-sm me-2"></span>Adding...');
            
            $.ajax({
                url: $(this).attr('action'),
                method: $(this).attr('method'),
                data: $(this).serialize(),
                success: function(response) {
                    if (response.success) {
                        // Update cart count
                        var currentCount = parseInt($('#cartSummary').text()) || 0;
                        $('#cartSummary').text(currentCount + parseInt($('#quantity').val()));
                        
                        // Show success message
                        button.html('<i class="fas fa-check me-2"></i>Added to Cart');
                        setTimeout(function() {
                            button.html(originalText).prop('disabled', false);
                        }, 2000);
                    }
                },
                error: function() {
                    alert('Error adding to cart');
                    button.html(originalText).prop('disabled', false);
                }
            });
        });
        
        // Share buttons
        $('.share-facebook').click(function(e) {
            e.preventDefault();
            var url = encodeURIComponent(window.location.href);
            window.open('https://www.facebook.com/sharer/sharer.php?u=' + url, 'facebook-share-dialog', 'width=626,height=436');
        });
        
        $('.share-twitter').click(function(e) {
            e.preventDefault();
            var url = encodeURIComponent(window.location.href);
            var text = encodeURIComponent('Check out this product: @Model.ProName');
            window.open('https://twitter.com/intent/tweet?text=' + text + '&url=' + url, 'twitter-share-dialog', 'width=626,height=436');
        });
        
        $('.share-pinterest').click(function(e) {
            e.preventDefault();
            var url = encodeURIComponent(window.location.href);
            var media = encodeURIComponent('@Url.Content("~/Product/" + Model.ProImage)');
            var description = encodeURIComponent('Check out this product: @Model.ProName');
            window.open('https://pinterest.com/pin/create/button/?url=' + url + '&media=' + media + '&description=' + description, 'pinterest-share-dialog', 'width=626,height=436');
        });
    });
</script>